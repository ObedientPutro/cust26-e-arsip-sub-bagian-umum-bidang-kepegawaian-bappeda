import{u as V,f as y,c as _,a as d,K as b,m as c,b as s,e,h as g,w as S,d as a,k as f,t as h,j,l as x,F as w}from"./app-CO7XkVRJ.js";import{_ as M}from"./AuthenticatedLayout-D6rz2QHF.js";import{_ as p}from"./TextInput-Cg_vdQQq.js";import{_ as m,a as u}from"./InputLabel-CngOTKBt.js";import{_ as F,a as U}from"./DateInput-DS4MXIUV.js";import"./_plugin-vue_export-helper-B1A2FBPl.js";const L={class:"bg-base-100 overflow-hidden shadow-md rounded-lg p-6"},N={class:"space-y-12"},P={class:"border-b border-gray-900/10 pb-12"},T={class:"grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6"},$={class:"sm:col-span-4"},O={class:"mt-2"},B={class:"sm:col-span-4"},C={class:"mt-2"},D={class:"sm:col-span-4"},E={class:"mt-2"},H={class:"sm:col-span-4"},K={class:"mt-2"},A={class:"sm:col-span-4"},I={class:"mt-2"},X={key:0,class:"text-xs mt-1"},q=["href"],z={class:"mt-6 flex items-center justify-end gap-x-6"},G=["disabled"],J={key:0,class:"loading loading-spinner"},te=Object.assign({layout:M},{__name:"IncomingLetterForm",props:{letter:Object,categories:Object,errors:Object},setup(n){const o=n,t=V({letter_number:o.letter?.letter_number||"",subject:o.letter?.subject||"",sender:o.letter?.sender||"",letter_date:o.letter?.letter_date||"",attachment_file:null}),v=y(()=>!!o.letter),k=()=>{const i=o.letter?route("incomingLetter.update",o.letter.id):route("incomingLetter.save");t.post(i,{forceFormData:!0,preserveState:!0,onSuccess:()=>{t.reset()},headers:{"X-HTTP-Method-Override":o.letter?"PATCH":"POST"}})};return(i,l)=>(d(),_(w,null,[i.route().current("incomingLetter.new")?(d(),b(e(g),{key:0,title:"Tambah Surat Masuk"})):c("",!0),i.route().current("incomingLetter.modify")?(d(),b(e(g),{key:1,title:"Ubah Surat Masuk"})):c("",!0),s("div",L,[s("form",{onSubmit:S(k,["prevent"]),class:"mx-2"},[s("div",N,[s("div",P,[s("div",T,[s("div",$,[s("div",O,[a(m,{for:"letter_number",value:"Nomor Surat"}),a(p,{id:"letter_number",ref:"letter_number",modelValue:e(t).letter_number,"onUpdate:modelValue":l[0]||(l[0]=r=>e(t).letter_number=r),type:"text",class:"mt-1 block w-full",placeholder:"Masukkan Nomor Surat"},null,8,["modelValue"]),a(u,{message:e(t).errors.letter_number,class:"mt-2"},null,8,["message"])])]),s("div",B,[s("div",C,[a(m,{for:"letter_date",value:"Tanggal Surat"}),a(F,{id:"letter_date",ref:"letter_date",modelValue:e(t).letter_date,"onUpdate:modelValue":l[1]||(l[1]=r=>e(t).letter_date=r),class:"mt-1 block w-full"},null,8,["modelValue"]),a(u,{message:e(t).errors.letter_date,class:"mt-2"},null,8,["message"])])]),s("div",D,[s("div",E,[a(m,{for:"subject",value:"Perihal / Subjek"}),a(p,{id:"subject",ref:"subject",modelValue:e(t).subject,"onUpdate:modelValue":l[2]||(l[2]=r=>e(t).subject=r),type:"text",class:"mt-1 block w-full",placeholder:"Masukkan Perihal Surat"},null,8,["modelValue"]),a(u,{message:e(t).errors.subject,class:"mt-2"},null,8,["message"])])]),s("div",H,[s("div",K,[a(m,{for:"sender",value:"Pengirim Surat"}),a(p,{id:"sender",ref:"sender",modelValue:e(t).sender,"onUpdate:modelValue":l[3]||(l[3]=r=>e(t).sender=r),type:"text",class:"mt-1 block w-full",placeholder:"Contoh: Kementerian Dalam Negeri"},null,8,["modelValue"]),a(u,{message:e(t).errors.sender,class:"mt-2"},null,8,["message"])])]),s("div",A,[s("div",I,[a(m,{for:"attachment_file",value:"Unggah Lampiran (PDF)"}),a(U,{id:"attachment_file",accept:".pdf,application/pdf","onUpdate:modelValue":l[4]||(l[4]=r=>e(t).attachment_file=r),class:"mt-1"}),n.letter&&n.letter.file_path?(d(),_("div",X,[l[5]||(l[5]=f(" File saat ini: ",-1)),s("a",{href:`/storage/${n.letter.file_path}`,target:"_blank",class:"text-primary hover:underline"},h(n.letter.file_path.split("/").pop()),9,q)])):c("",!0),a(u,{message:e(t).errors.attachment_file,class:"mt-2"},null,8,["message"])])])])])]),s("div",z,[a(e(x),{href:i.route("incomingLetter.index"),class:"btn btn-ghost"},{default:j(()=>l[6]||(l[6]=[f("Batal",-1)])),_:1,__:[6]},8,["href"]),s("button",{type:"submit",class:"btn text-white bg-blue-600 hover:bg-blue-700",disabled:e(t).processing},[e(t).processing?(d(),_("span",J)):c("",!0),f(" "+h(v.value?"Update Surat Masuk":"Simpan Surat Masuk"),1)],8,G)])],32)])],64))}});export{te as default};
