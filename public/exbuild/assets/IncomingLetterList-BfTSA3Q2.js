import{c as r,a as d,b as t,x as L,p as f,u as C,i as B,q as S,d as i,e as a,h as $,j as l,t as n,k as _,n as z,m as I,s as N,v as P,F as V}from"./app-CO7XkVRJ.js";import{_ as Z}from"./AuthenticatedLayout-D6rz2QHF.js";import{_ as H}from"./en-DGQ-xVEB.js";import{D as T}from"./DataTable-DnRxxmIG.js";import{r as g,d as U}from"./dayjs.min-CMc8oMta.js";import{l as Y,r as v,a as F}from"./lodash-D7oR4NRi.js";import{_ as O}from"./_plugin-vue_export-helper-B1A2FBPl.js";import"./Pagination-FpKpIvqA.js";function q(u,c){return d(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}),t("path",{"fill-rule":"evenodd",d:"M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 0 1 0-1.113ZM17.25 12a5.25 5.25 0 1 1-10.5 0 5.25 5.25 0 0 1 10.5 0Z","clip-rule":"evenodd"})])}function A(u,c){return d(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{d:"M5.25 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM2.25 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM18.75 7.5a.75.75 0 0 0-1.5 0v2.25H15a.75.75 0 0 0 0 1.5h2.25v2.25a.75.75 0 0 0 1.5 0v-2.25H21a.75.75 0 0 0 0-1.5h-2.25V7.5Z"})])}const E={class:"bg-base-100 overflow-hidden shadow-md rounded-lg p-6"},K={class:"input input-bordered flex items-center gap-2 w-full md:w-auto"},G={class:"flex items-center gap-3"},J=["href"],Q={class:"text-xs opacity-70 capitalize"},R={class:"flex items-center gap-3"},W={class:"text-start"},X={class:"font-bold capitalize"},tt={class:"text-xs opacity-70 capitalize"},et={key:0,class:"badge badge-success badge-outline"},st={key:1,class:"badge badge-error badge-outline"},at={class:"text-center capitalize"},ot={class:"flex justify-center gap-1"},it={class:"tooltip","data-tip":"Lihat"},nt=["href"],lt={key:0,class:"tooltip","data-tip":"Buat Disposisi"},rt=["href"],dt={key:0,class:"tooltip","data-tip":"Ubah"},ct=["href"],ut={key:1,class:"tooltip","data-tip":"Ubah"},pt={class:"btn btn-warning btn-sm text-white",disabled:""},_t={key:0,class:"tooltip","data-tip":"Hapus"},bt=["onClick"],ht={key:1,class:"tooltip","data-tip":"Hapus"},mt={class:"btn btn-error btn-sm text-white",disabled:""},ft={class:"card-body p-4"},gt={class:"flex justify-between items-start gap-4"},vt={class:"flex items-center gap-3"},xt={class:"font-bold capitalize"},wt={class:"flex gap-1"},yt=["href"],kt=["onClick"],jt={class:"text-xs space-y-1"},Dt={class:"flex justify-between"},Mt={class:"font-medium"},Lt={class:"flex justify-between"},Ct={class:"font-medium"},Bt={class:"flex justify-between items-center"},St={class:"p-6"},$t={class:"py-4"},zt=Object.assign({layout:Z},{__name:"IncomingLetterList",props:{letters:Object,filters:Object},setup(u){const c=L().props.auth,w=u,p=f(null),y=C({}),b=f(!1),h=f(w.filters.search);B(h,Y.debounce(o=>{S.get(route("incomingLetter.index"),{search:o},{preserveState:!0,replace:!0})},300));const x=o=>{p.value=o,b.value=!0},m=()=>{b.value=!1,p.value=null},k=()=>{p.value&&y.delete(route("incomingLetter.delete",p.value.id),{onSuccess:()=>{m()}})},j=o=>U(o).format("ddd, DD MMM YYYY"),D=[{key:"no",label:"No.",class:"text-center"},{key:"letter_number",label:"Nomor Surat"},{key:"subject",label:"Subjek & Pengirim",class:"text-center"},{key:"disposition_status",label:"Status Disposisi",class:"text-center"},{key:"letter_date",label:"Tanggal",class:"text-center"}];return(o,s)=>(d(),r(V,null,[i(a($),{title:"Pegawai"}),t("div",E,[i(T,{headers:D,items:u.letters,addUrl:o.route("incomingLetter.new")},{"header-info":l(()=>s[1]||(s[1]=[t("h2",{class:"card-title text-xl font-bold"},"Surat Masuk",-1),t("p",{class:"text-sm text-base-content/70"},"Kelola data seluruh surat masuk.",-1)])),"header-search":l(()=>[t("label",K,[N(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>h.value=e),type:"text",class:"grow",placeholder:"Cari nomor surat, subject, pengguna..."},null,512),[[P,h.value]]),i(a(F),{class:"icon"})])]),"col-no":l(({index:e})=>[_(n(u.letters.from+e),1)]),"col-letter_number":l(({item:e})=>[t("div",G,[t("div",null,[t("a",{href:o.route("document.file",e.id),target:"_blank","data-inertia-ignore":"",rel:"noopener noreferrer",class:"font-bold text-primary capitalize hover:underline",title:"Buka Pratinjau di Tab Baru"},n(e.letter_number),9,J),t("div",Q,"Ditambahkan Oleh, "+n(e.user.name),1)])])]),"col-subject":l(({item:e})=>[t("div",R,[t("div",W,[t("div",X,n(e.subject),1),t("div",tt,"Dikirim oleh, "+n(e.sender),1)])])]),"col-disposition_status":l(({item:e})=>[e.is_disposed?(d(),r("div",et,"Ditugaskan")):(d(),r("div",st,"Belum Ada"))]),"col-letter_date":l(({item:e})=>[t("div",at,n(j(e.letter_date)),1)]),"col-actions":l(({item:e})=>[t("div",ot,[t("div",it,[t("a",{href:o.route("incomingLetter.view",e.id),class:"btn btn-info btn-sm text-white"},[i(a(q),{class:"icon"})],8,nt)]),a(c).permissions.canManageDisposition?(d(),r("div",lt,[t("a",{href:o.route("dispositionIncomingLetter.new",e.id),class:"btn btn-primary btn-sm text-white"},[i(a(A),{class:"icon"})],8,rt)])):I("",!0),t("div",null,[a(c).permissions.canManageIncomingLetters||a(c).user.id===e.user_id?(d(),r("div",dt,[t("a",{href:o.route("incomingLetter.modify",e.id),class:"btn btn-warning btn-sm text-white"},[i(a(g),{class:"icon"})],8,ct)])):(d(),r("div",ut,[t("a",pt,[i(a(g),{class:"icon"})])]))]),t("div",null,[a(c).permissions.canManageIncomingLetters||a(c).user.id===e.user_id?(d(),r("div",_t,[t("button",{onClick:M=>x(e),class:"btn btn-error btn-sm text-white"},[i(a(v),{class:"icon"})],8,bt)])):(d(),r("div",ht,[t("button",mt,[i(a(v),{class:"icon"})])]))])])]),"mobile-card":l(({item:e})=>[t("div",ft,[t("div",gt,[t("div",vt,[t("div",null,[t("div",xt,n(e.letter_number),1)])]),t("div",wt,[t("a",{href:o.route("incomingLetter.modify",e.id),class:"btn btn-square btn-ghost btn-sm"},[i(a(g),{class:"icon text-warning"})],8,yt),t("button",{onClick:M=>x(e),class:"btn btn-square btn-ghost btn-sm"},[i(a(v),{class:"icon text-error"})],8,kt)])]),s[5]||(s[5]=t("div",{class:"divider my-2"},null,-1)),t("dl",jt,[t("div",Dt,[s[2]||(s[2]=t("dt",{class:"opacity-70"},"Subjek:",-1)),t("dd",Mt,n(e.subject),1)]),t("div",Lt,[s[3]||(s[3]=t("dt",{class:"opacity-70"},"Pengirim:",-1)),t("dd",Ct,n(e.sender),1)]),t("div",Bt,[s[4]||(s[4]=t("dt",{class:"opacity-70"},"Status:",-1)),t("dd",null,[t("div",{class:z(["badge badge-xs mr-1",e.is_disposed===!0?"badge-success":"badge-error"])},null,2),_(" "+n(e.is_disposed===!0?"Belum Ada":"Ditugaskan"),1)])])])])]),_:1},8,["items","addUrl"])]),i(H,{show:b.value,onClose:m},{default:l(()=>[t("div",St,[s[8]||(s[8]=t("h3",{class:"text-lg font-bold"},"Konfirmasi Penghapusan",-1)),t("p",$t,[s[6]||(s[6]=_("Yakin ingin menghapus ",-1)),t("strong",null,n(p.value?.letter_number),1),s[7]||(s[7]=_("?",-1))]),t("div",{class:"flex justify-end gap-3"},[t("button",{class:"btn",onClick:m},"Batal"),t("button",{class:"btn btn-error text-white",onClick:k},"Hapus")])])]),_:1},8,["show"])],64))}}),Yt=O(zt,[["__scopeId","data-v-90b38f02"]]);export{Yt as default};
