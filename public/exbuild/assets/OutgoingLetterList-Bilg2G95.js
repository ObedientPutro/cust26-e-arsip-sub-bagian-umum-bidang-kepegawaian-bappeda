import{x as C,p as h,u as M,i as S,q as z,c as d,a as c,d as l,b as t,e as o,h as B,j as i,t as a,k as m,s as O,v as P,F as T}from"./app-CO7XkVRJ.js";import{_ as $}from"./AuthenticatedLayout-D6rz2QHF.js";import{_ as N}from"./en-DGQ-xVEB.js";import{D as U}from"./DataTable-DnRxxmIG.js";import{r as g,d as Y}from"./dayjs.min-CMc8oMta.js";import{l as F,r as v,a as V}from"./lodash-D7oR4NRi.js";import{_ as q}from"./_plugin-vue_export-helper-B1A2FBPl.js";import"./Pagination-FpKpIvqA.js";const H={class:"bg-base-100 overflow-hidden shadow-md rounded-lg p-6"},I={class:"input input-bordered flex items-center gap-2 w-full md:w-auto"},K={class:"flex items-center gap-3"},E=["href"],A={class:"text-xs capitalize"},G={class:"text-xs opacity-70 capitalize"},J={class:"text-center capitalize"},Q={class:"flex justify-center gap-1"},R={key:0,class:"tooltip","data-tip":"Ubah"},W=["href"],X={key:1,class:"tooltip","data-tip":"Ubah"},Z={class:"btn btn-warning btn-sm text-white",disabled:""},tt={key:0,class:"tooltip","data-tip":"Hapus"},et=["onClick"],st={key:1,class:"tooltip","data-tip":"Hapus"},at={class:"btn btn-error btn-sm text-white",disabled:""},ot={class:"card-body p-4"},nt={class:"flex justify-between items-start gap-4"},lt={class:"flex items-center gap-3"},it={class:"font-bold capitalize"},rt={class:"text-xs opacity-70 capitalize"},dt={class:"flex gap-1"},ct=["href"],ut=["onClick"],_t={class:"text-xs space-y-1"},pt={class:"flex justify-between"},bt={class:"font-medium"},ft={class:"flex justify-between"},ht={class:"font-medium"},mt={class:"flex justify-between"},gt={class:"font-medium"},vt={class:"p-6"},xt={class:"py-4"},yt=Object.assign({layout:$},{__name:"OutgoingLetterList",props:{letters:Object,filters:Object},setup(_){const u=C().props.auth,k=_,r=h(null),w=M({}),p=h(!1),b=h(k.filters.search);S(b,F.debounce(n=>{z.get(route("outgoingLetter.index"),{search:n},{preserveState:!0,replace:!0})},300));const x=n=>{r.value=n,p.value=!0},f=()=>{p.value=!1,r.value=null},j=()=>{r.value&&w.delete(route("outgoingLetter.delete",r.value.id),{onSuccess:()=>{f()}})},y=n=>Y(n).format("ddd, DD MMM YYYY"),L=[{key:"no",label:"No.",class:"text-center"},{key:"letter_number",label:"Nomor Surat"},{key:"subject",label:"Subjek",class:"text-center"},{key:"recipient",label:"Penerima",class:"text-center"},{key:"letter_date",label:"Tanggal",class:"text-center"}];return(n,s)=>(c(),d(T,null,[l(o(B),{title:"Pegawai"}),t("div",H,[l(U,{headers:L,items:_.letters,addUrl:n.route("outgoingLetter.new")},{"header-info":i(()=>s[1]||(s[1]=[t("h2",{class:"card-title text-xl font-bold"},"Surat Keluar",-1),t("p",{class:"text-sm text-base-content/70"},"Kelola data seluruh surat keluar.",-1)])),"header-search":i(()=>[t("label",I,[O(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>b.value=e),type:"text",class:"grow",placeholder:"Cari nomor surat, subject, pengguna..."},null,512),[[P,b.value]]),l(o(V),{class:"icon"})])]),"col-no":i(({index:e})=>[m(a(_.letters.from+e),1)]),"col-letter_number":i(({item:e})=>[t("div",K,[t("div",null,[t("a",{href:n.route("document.file",e.id),target:"_blank","data-inertia-ignore":"",rel:"noopener noreferrer",class:"font-bold text-primary capitalize hover:underline",title:"Buka Pratinjau di Tab Baru"},a(e.letter_number),9,E),t("div",A,a(e.category.name)+", "+a(e.category.classification_code),1),t("div",G,"Ditambahkan Oleh, "+a(e.user.name),1)])])]),"col-letter_date":i(({item:e})=>[t("div",J,a(y(e.letter_date)),1)]),"col-actions":i(({item:e})=>[t("div",Q,[t("div",null,[o(u).permissions.canManageIncomingLetters||o(u).user.id===e.user_id?(c(),d("div",R,[t("a",{href:n.route("outgoingLetter.modify",e.id),class:"btn btn-warning btn-sm text-white"},[l(o(g),{class:"icon"})],8,W)])):(c(),d("div",X,[t("a",Z,[l(o(g),{class:"icon"})])]))]),t("div",null,[o(u).permissions.canManageIncomingLetters||o(u).user.id===e.user_id?(c(),d("div",tt,[t("button",{onClick:D=>x(e),class:"btn btn-error btn-sm text-white"},[l(o(v),{class:"icon"})],8,et)])):(c(),d("div",st,[t("button",at,[l(o(v),{class:"icon"})])]))])])]),"mobile-card":i(({item:e})=>[t("div",ot,[t("div",nt,[t("div",lt,[t("div",null,[t("div",it,a(e.letter_number),1),t("div",rt,a(e.category.name)+", "+a(e.category.classification_code),1)])]),t("div",dt,[t("a",{href:n.route("outgoingLetter.modify",e.id),class:"btn btn-square btn-ghost btn-sm"},[l(o(g),{class:"icon text-warning"})],8,ct),t("button",{onClick:D=>x(e),class:"btn btn-square btn-ghost btn-sm"},[l(o(v),{class:"icon text-error"})],8,ut)])]),s[5]||(s[5]=t("div",{class:"divider my-2"},null,-1)),t("dl",_t,[t("div",pt,[s[2]||(s[2]=t("dt",{class:"opacity-70"},"Subjek:",-1)),t("dd",bt,a(e.subject),1)]),t("div",ft,[s[3]||(s[3]=t("dt",{class:"opacity-70"},"Penerima:",-1)),t("dd",ht,a(e.recipient),1)]),t("div",mt,[s[4]||(s[4]=t("dt",{class:"opacity-70"},"Tanggal:",-1)),t("dd",gt,a(y(e.letter_date)),1)])])])]),_:1},8,["items","addUrl"])]),l(N,{show:p.value,onClose:f},{default:i(()=>[t("div",vt,[s[8]||(s[8]=t("h3",{class:"text-lg font-bold"},"Konfirmasi Penghapusan",-1)),t("p",xt,[s[6]||(s[6]=m("Yakin ingin menghapus ",-1)),t("strong",null,a(r.value?.letter_number),1),s[7]||(s[7]=m("?",-1))]),t("div",{class:"flex justify-end gap-3"},[t("button",{class:"btn",onClick:f},"Batal"),t("button",{class:"btn btn-error text-white",onClick:j},"Hapus")])])]),_:1},8,["show"])],64))}}),zt=q(yt,[["__scopeId","data-v-cfc7213d"]]);export{zt as default};
