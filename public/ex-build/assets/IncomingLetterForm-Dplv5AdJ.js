import{u as y,f as V,c as _,a as u,I as g,m as c,b as s,e,h as b,w as S,d as a,k as f,t as h,j,l as x,F as w}from"./app-dLBOcVNJ.js";import{_ as M}from"./AuthenticatedLayout-CyZJui5o.js";import{_ as p}from"./TextInput-CVtSF1iH.js";import{_ as n,a as d}from"./InputLabel-OTQTgnDj.js";import{_ as U,a as F}from"./DateInput-DRoi3Kgx.js";import{_ as P}from"./SelectInput-CKLdoSGI.js";import"./_plugin-vue_export-helper-D0KVHBas.js";const $={class:"bg-base-100 overflow-hidden shadow-md rounded-lg p-6"},L={class:"space-y-12"},N={class:"border-b border-gray-900/10 pb-12"},T={class:"grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6"},O={class:"sm:col-span-4"},B={class:"mt-2"},C={class:"sm:col-span-4"},D={class:"mt-2"},K={class:"sm:col-span-4"},E={class:"mt-2"},H={class:"sm:col-span-4"},I={class:"mt-2"},z={class:"sm:col-span-4"},A={class:"mt-2"},X={class:"sm:col-span-4"},q={class:"mt-2"},G={key:0,class:"text-xs mt-1"},J=["href"],Q={class:"mt-6 flex items-center justify-end gap-x-6"},R=["disabled"],W={key:0,class:"loading loading-spinner"},re=Object.assign({layout:M},{__name:"IncomingLetterForm",props:{letter:Object,categories:Object,errors:Object},setup(i){const o=i,t=y({letter_number:o.letter?.letter_number||"",subject:o.letter?.subject||"",sender:o.letter?.sender||"",letter_date:o.letter?.letter_date||"",category_id:o.letter?.category_id||"",attachment_file:null}),v=V(()=>!!o.letter),k=()=>{const m=o.letter?route("incomingLetter.update",o.letter.id):route("incomingLetter.save");t.post(m,{forceFormData:!0,preserveState:!0,onSuccess:()=>{t.reset()},headers:{"X-HTTP-Method-Override":o.letter?"PATCH":"POST"}})};return(m,l)=>(u(),_(w,null,[m.route().current("incomingLetter.new")?(u(),g(e(b),{key:0,title:"Tambah Surat Masuk"})):c("",!0),m.route().current("incomingLetter.modify")?(u(),g(e(b),{key:1,title:"Ubah Surat Masuk"})):c("",!0),s("div",$,[s("form",{onSubmit:S(k,["prevent"]),class:"mx-2"},[s("div",L,[s("div",N,[s("div",T,[s("div",O,[s("div",B,[a(n,{for:"letter_number",value:"Nomor Surat"}),a(p,{id:"letter_number",ref:"letter_number",modelValue:e(t).letter_number,"onUpdate:modelValue":l[0]||(l[0]=r=>e(t).letter_number=r),type:"text",class:"mt-1 block w-full",placeholder:"Masukkan Nomor Surat"},null,8,["modelValue"]),a(d,{message:e(t).errors.letter_number,class:"mt-2"},null,8,["message"])])]),s("div",C,[s("div",D,[a(n,{for:"letter_date",value:"Tanggal Surat"}),a(U,{id:"letter_date",ref:"letter_date",modelValue:e(t).letter_date,"onUpdate:modelValue":l[1]||(l[1]=r=>e(t).letter_date=r),class:"mt-1 block w-full"},null,8,["modelValue"]),a(d,{message:e(t).errors.letter_date,class:"mt-2"},null,8,["message"])])]),s("div",K,[s("div",E,[a(n,{for:"subject",value:"Perihal / Subjek"}),a(p,{id:"subject",ref:"subject",modelValue:e(t).subject,"onUpdate:modelValue":l[2]||(l[2]=r=>e(t).subject=r),type:"text",class:"mt-1 block w-full",placeholder:"Masukkan Perihal Surat"},null,8,["modelValue"]),a(d,{message:e(t).errors.subject,class:"mt-2"},null,8,["message"])])]),s("div",H,[s("div",I,[a(n,{for:"sender",value:"Pengirim Surat"}),a(p,{id:"sender",ref:"sender",modelValue:e(t).sender,"onUpdate:modelValue":l[3]||(l[3]=r=>e(t).sender=r),type:"text",class:"mt-1 block w-full",placeholder:"Contoh: Kementerian Dalam Negeri"},null,8,["modelValue"]),a(d,{message:e(t).errors.sender,class:"mt-2"},null,8,["message"])])]),s("div",z,[s("div",A,[a(n,{for:"category",value:"Kategori Surat"}),a(P,{class:"capitalize",modelValue:e(t).category_id,"onUpdate:modelValue":l[4]||(l[4]=r=>e(t).category_id=r),items:i.categories,"item-value":"id","item-text":"name",placeholder:"Pilih Kategori"},null,8,["modelValue","items"]),a(d,{message:e(t).errors.category_id,class:"mt-2"},null,8,["message"])])]),s("div",X,[s("div",q,[a(n,{for:"attachment_file",value:"Unggah Lampiran (PDF)"}),a(F,{id:"attachment_file",accept:".pdf,application/pdf","onUpdate:modelValue":l[5]||(l[5]=r=>e(t).attachment_file=r),class:"mt-1"}),i.letter&&i.letter.file_path?(u(),_("div",G,[l[6]||(l[6]=f(" File saat ini: ",-1)),s("a",{href:`/storage/${i.letter.file_path}`,target:"_blank",class:"text-primary hover:underline"},h(i.letter.file_path.split("/").pop()),9,J)])):c("",!0),a(d,{message:e(t).errors.attachment_file,class:"mt-2"},null,8,["message"])])])])])]),s("div",Q,[a(e(x),{href:m.route("incomingLetter.index"),class:"btn btn-ghost"},{default:j(()=>l[7]||(l[7]=[f("Batal",-1)])),_:1,__:[7]},8,["href"]),s("button",{type:"submit",class:"btn text-white bg-blue-600 hover:bg-blue-700",disabled:e(t).processing},[e(t).processing?(u(),_("span",W)):c("",!0),f(" "+h(v.value?"Update Surat Masuk":"Simpan Surat Masuk"),1)],8,R)])],32)])],64))}});export{re as default};
